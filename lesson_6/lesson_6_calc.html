<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>КАЛЬКУЛЯТОР</title>
    <style>
        td {
            width: 50px;
            height: 50px;
            text-align: center;
        }

        input {
            width: 50px;
            height: 50px;
            background-color:darkgrey;
            color: aliceblue;
            font-size: 18px;
        }

        #display {
            width: 260px;
            background-color:beige;
            color:darkslategray;
            font-size: 28px;
        }

    </style>
</head>

<body>

    <form name="calc">
        <table>
            <tr>
                <td colspan="5"><input id='display' name='display' value='0' /> </td>
            </tr>
            <tr>
                <td><input type="button" value="%" name="batt_proc"></td>
                <td><input type="button" value="CE" name="batt_CE" onclick='clearCE();'></td>
                <td><input type="button" value="C" name="batt_C" onclick='clearC();'></td>
                <td><input type="button" value=" &#9001;= " name="batt_bck"></td>
                <td><input type="button" value=" / " name="batt_div" onclick='operators(this.value);'></td>
            </tr>
            <tr>
                <td><input type="button" value="&radic;" name="batt_root" onclick='root();'></td>
                <td><input type="button" value="7" name="batt7" onclick='num(this.value);'></td>
                <td><input type="button" value="8" name="batt8" onclick='num(this.value);'></td>
                <td><input type="button" value="9" name="batt9" onclick='num(this.value);'></td>
                <td><input type="button" value="*" name="batt_mult" onclick='operators(this.value);'></td>
            </tr>
            <tr>
                <td><input type="button" value="X &sup2; " name="batt_pow" onclick='pow();'></td>
                <td><input type="button" value="4" name="batt4" onclick='num(this.value);'></td>
                <td><input type="button" value="5" name="batt5" onclick='num(this.value);'></td>
                <td><input type="button" value="6" name="batt6" onclick='num(this.value);'></td>
                <td><input type="button" value="-" name="batt_minus" onclick='operators(this.value);'></td>
            </tr>
            <tr>
                <td><input type="button" value="X &sup3;" name="batt_pow3"></td>
                <td><input type="button" value="1" name="batt1" onclick='num(this.value);'></td>
                <td><input type="button" value="2" name="batt2" onclick='num(this.value);'></td>
                <td><input type="button" value="3" name="batt3" onclick='num(this.value);'></td>
                <td><input type="button" value="+" name="batt_plus" onclick='operators(this.value);'></td>
            </tr>
            <tr>
                <td><input type="button" value="&sup1/x" name="batt_divX" onclick="divX();"></td>
                <td><input type="button" value="+/-" name="batt_pm" onclick='plusMinus();'></td>
                <td><input type="button" value="0" name="batt0" onclick='num(this.value);'></td>
                <td><input type="button" value=" , " name="batt_float"></td>
                <td><input type="button" value="=" name="batt_rezult"></td>
            </tr>
            <tr>
                <td colspan='5'><button value1="1/x" name="batt_test" onclick='num(99)'>
                        6</button></td>

            </tr>
        </table>
    </form>
    <script>
        var firstDigit = 1; //1- первая цифра нового числа; 0 - НЕ первая цифра  числа
        var result = ''; //переменная для хранения промежуточных результатов вычислений
        var prevOperator = '';

        function num(x) {
            if (prevOperator.trim() == '/' && x == 0) {
                alert('на ноль делить низззя! \n замененно на 1');
                x = 1;
            }
            if (firstDigit) {
                calc.display.value = x;
                firstDigit = 0;
            } else {
                calc.display.value += x;
            }


        }

        function operators(y) {

            if (prevOperator != '@') result = eval(result + prevOperator + calc.display.value);
            //alert(result);
            calc.display.value = result;
            firstDigit = 1;
            prevOperator = y;
        }

        function plusMinus() {
            calc.display.value *= -1;
        }

        function clearC() {
            calc.display.value = 0;
            firstDigit = 1;
        }

        function clearCE() {
            calc.display.value = 0;
            result = '0';
            firstDigit = 1;
        }

        function root() {
            if (calc.display.value < 0) {
                alert('Отрицательное значение в корне !');
                return;
            }
            result = calc.display.value = Math.sqrt(calc.display.value);
            prevOperator = '@';
        }

        function pow() {
            result = calc.display.value = Math.pow(calc.display.value, 2);
            prevOperator = '@';
        }

        function divX() {
            if (calc.display.value == 0) {
                alert('делить на ноль низя !');
                return;
            }
            result = calc.display.value = 1 / calc.display.value;
        }

    </script>
</body>

</html>
